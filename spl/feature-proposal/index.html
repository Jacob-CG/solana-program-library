<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<title data-react-helmet="true">Feature Proposal Program | Solana Program Library Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Feature Proposal Program | Solana Program Library Docs"><meta data-react-helmet="true" name="description" content="The Feature Proposal Program provides a workflow for activation of Solana"><meta data-react-helmet="true" property="og:description" content="The Feature Proposal Program provides a workflow for activation of Solana"><meta data-react-helmet="true" property="og:url" content="https://jacob-cg.github.io//solana-program-library/spl/feature-proposal"><link data-react-helmet="true" rel="shortcut icon" href="/solana-program-library/spl/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://jacob-cg.github.io//solana-program-library/spl/feature-proposal"><link rel="stylesheet" href="/solana-program-library/spl/styles.60c563ee.css">
<link rel="preload" href="/solana-program-library/spl/styles.08b0f695.js" as="script">
<link rel="preload" href="/solana-program-library/spl/runtime~main.b775e681.js" as="script">
<link rel="preload" href="/solana-program-library/spl/main.4fc48ab9.js" as="script">
<link rel="preload" href="/solana-program-library/spl/1.1e40216e.js" as="script">
<link rel="preload" href="/solana-program-library/spl/2.c09dfc1d.js" as="script">
<link rel="preload" href="/solana-program-library/spl/22.4d569a61.js" as="script">
<link rel="preload" href="/solana-program-library/spl/20.d408417c.js" as="script">
<link rel="preload" href="/solana-program-library/spl/720ffad6.9c0d7f9c.js" as="script">
<link rel="preload" href="/solana-program-library/spl/17896441.fdadb27c.js" as="script">
<link rel="preload" href="/solana-program-library/spl/417fca3a.11e73e1a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><a class="navbar__brand" href="/solana-program-library/spl/"><img class="navbar__logo" src="/solana-program-library/spl/img/logo-horizontal.svg" alt="Solana Logo"></a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/solana-program-library/spl/"><img class="navbar__logo" src="/solana-program-library/spl/img/logo-horizontal.svg" alt="Solana Logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Solana Program Library (SPL)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/solana-program-library/spl/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/solana-program-library/spl/token">Token Program</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/solana-program-library/spl/token-swap">Token Swap Program</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/solana-program-library/spl/token-lending">Token-Lending Program</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/solana-program-library/spl/associated-token-account">Associated Token Account Program</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/solana-program-library/spl/memo">Memo Program</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/solana-program-library/spl/name-service">Name Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/solana-program-library/spl/shared-memory">Shared memory Program</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/solana-program-library/spl/stake-pool">Stake Pool Program</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/solana-program-library/spl/feature-proposal">Feature Proposal Program</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Feature Proposal Program</h1></header><div class="markdown"><p>The Feature Proposal Program provides a workflow for activation of Solana
network features through community vote based on validator stake weight.</p><p>Community voting is accomplished using <a href="/solana-program-library/spl/token">SPL Tokens</a>.  Tokens are
minted that represent the total active stake on the network, and distributed to
all validators based on their stake.  Validators vote for feature activation by
transferring their vote tokens to a predetermined address.  Once the vote
threshold is met the feature is activated.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="background"></a>Background<a aria-hidden="true" tabindex="-1" class="hash-link" href="#background" title="Direct link to heading">#</a></h2><p>The Solana validator software supports runtime feature activation through the
built-in <code>Feature</code> program.  This program ensures that features are activated
simultaneously across all validators to avoid divergent behavior that would
cause hard forks or otherwise break consensus.</p><p>The
<a href="https://docs.rs/solana-program/latest/solana_program/feature/index.html">feature</a>
and <a href="https://docs.rs/solana-sdk/latest/solana_sdk/feature_set/index.html">feature_set</a>
Rust modules are the primitives for this facility, and the <code>solana feature</code>
command-line subcommands allow for easy feature status inspection and feature
activation.</p><p>The <code>solana feature activate</code> workflow was designed for use by the core Solana
developers to allow for low-overhead addition of non-controversial network
features over time.</p><p>The Feature Proposal Program provides an additional mechanism over these runtime
feature activation primitives to permit feature activation by community vote
when appropriate.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="source"></a>Source<a aria-hidden="true" tabindex="-1" class="hash-link" href="#source" title="Direct link to heading">#</a></h2><p>The Feature Proposal Program&#x27;s source is available on
<a href="https://github.com/solana-labs/solana-program-library" target="_blank" rel="noopener noreferrer">github</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="interface"></a>Interface<a aria-hidden="true" tabindex="-1" class="hash-link" href="#interface" title="Direct link to heading">#</a></h2><p>The Feature Proposal Program is written in Rust and available on <a href="https://crates.io/crates/spl-feature-proposal" target="_blank" rel="noopener noreferrer">crates.io</a> and <a href="https://docs.rs/spl-feature-proposal" target="_blank" rel="noopener noreferrer">docs.rs</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="command-line-utility"></a>Command-line Utility<a aria-hidden="true" tabindex="-1" class="hash-link" href="#command-line-utility" title="Direct link to heading">#</a></h2><p>The <code>spl-feature-proposal</code> command-line utility can be used to manage feature
proposal.  Once you have <a href="https://rustup.rs/" target="_blank" rel="noopener noreferrer">Rust installed</a>, run:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-sh codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ cargo install spl-feature-proposal-cli</span></div></div></div></div></div><p>Run <code>spl-feature-proposal --help</code> for a full description of available commands.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="configuration"></a>Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configuration" title="Direct link to heading">#</a></h3><p>The <code>spl-feature-proposal</code> configuration is shared with the <code>solana</code> command-line tool.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="feature-proposal-life-cycle"></a>Feature Proposal Life Cycle<a aria-hidden="true" tabindex="-1" class="hash-link" href="#feature-proposal-life-cycle" title="Direct link to heading">#</a></h2><p>This section describes the life cycle of a feature proposal.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="implement-the-feature"></a>Implement the Feature<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implement-the-feature" title="Direct link to heading">#</a></h3><p>The first step is to conceive of the new feature and realize it in the
Solana code base, working with the core Solana developers at <a href="https://github.com/solana-labs/solana" target="_blank" rel="noopener noreferrer">https://github.com/solana-labs/solana</a>.</p><p>During the implementation, a <em>feature id</em> will be required to identity the new
feature in the code base to avoid the new functionality until its activation.
The <em>feature id</em> for a feature proposal is derived by running the following
commands.</p><p>First create a keypair for the proposal:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ solana-keygen new --outfile feature-proposal.json --silent --no-passphrase</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Wrote new keypair to feature-proposal.json</span></div></div></div></div></div><p>Now run the <code>spl-feature-proposal</code> program to derive the <em>feature id</em>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ spl-feature-proposal address feature-proposal.json</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Feature Id: HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Token Mint Address: ALvA7Lv9jbo8JFhxqnRpjWWuR3aD12uCb5KBJst4uc3d</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Acceptance Token Address: AdqKm3mSJf8AtTWjfpA5ZbJszWQPcwyLA2XkRyLbf3Di</span></div></div></div></div></div><p>which in this case is <code>HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA</code>.</p><p><code>HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA</code> is the identifier that will be
used in the code base and eventually will be visible in the <code>solana feature status</code> command.</p><p>Note however that it is not possible to use <code>solana feature activate</code> to
activate this feature, as there is no private key for
<code>HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA</code>.  Activation of this feature is
only possible by the Feature Proposal Program.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="initiate-the-feature-proposal"></a>Initiate the Feature Proposal<a aria-hidden="true" tabindex="-1" class="hash-link" href="#initiate-the-feature-proposal" title="Direct link to heading">#</a></h3><p>After the feature is implemented and deployed to the Solana cluster,
the <em>feature id</em> will be visible in <code>solana feature status</code> and the <em>feature
proposer</em> may initiate the community proposal process.</p><p>This is done by running:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ spl-feature-proposal propose feature-proposal.json</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Feature Id: HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Token Mint Address: ALvA7Lv9jbo8JFhxqnRpjWWuR3aD12uCb5KBJst4uc3d</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Distributor Token Address: GK55hNft4TGc3Hg4KzbjEmju8VfaNuXK8jQNDTZKcsNF</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Acceptance Token Address: AdqKm3mSJf8AtTWjfpA5ZbJszWQPcwyLA2XkRyLbf3Di</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Number of validators: 376</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tokens to be minted: 134575791.53064314</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tokens required for acceptance: 90165780.3255309 (67%)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Token distribution file: feature-proposal.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">JSON RPC URL: http://api.mainnet-beta.solana.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Distribute the proposal tokens to all validators by running:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $ solana-tokens distribute-spl-tokens --from GK55hNft4TGc3Hg4KzbjEmju8VfaNuXK8jQNDTZKcsNF --input-csv feature-proposal.csv --db-path db.8CyUVvio --fee-payer ~/.config/solana/id.json --owner &lt;FEATURE_PROPOSAL_KEYPAIR&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $ solana-tokens spl-token-balances --mint ALvA7Lv9jbo8JFhxqnRpjWWuR3aD12uCb5KBJst4uc3d --input-csv feature-proposal.csv</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Once the distribution is complete, request validators vote for the proposal. To vote, validators should first look up their token account address:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $ spl-token --owner ~/validator-keypair.json accounts ALvA7Lv9jbo8JFhxqnRpjWWuR3aD12uCb5KBJst4uc3d</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">and then submit their vote by running:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $ spl-token --owner ~/validator-keypair.json transfer &lt;TOKEN_ACCOUNT_ADDRESS&gt; ALL AdqKm3mSJf8AtTWjfpA5ZbJszWQPcwyLA2XkRyLbf3Di</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Periodically the votes must be tallied by running:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  $ spl-feature-proposal tally 8CyUVvio2oYAP28ZkMBPHq88ikhRgWet6i4NYsCW5Cxa</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Tallying is permissionless and may be run by anybody.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Once this feature proposal is accepted, the HQ3baDfNU7WKCyWvtMYZmi51YPs7vhSiLn1ESYp3jhiA feature will be activated at the next epoch.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Add --confirm flag to initiate the feature proposal</span></div></div></div></div></div><p>If the output looks good run the command again with the <code>--confirm</code> flag to
continue, and then follow the remaining steps in the output to distribute the
vote tokens to all the validators.</p><p><strong>COST:</strong> As a part of token distribution, the <em>feature proposer</em> will be
financing the creation of SPL Token accounts for each of the validators.  A SPL
Token account requires 0.00203928 SOL at creation, so the cost for initiating a
feature proposal on a network with 500 validators is approximately 1 SOL.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="tally-the-votes"></a>Tally the Votes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#tally-the-votes" title="Direct link to heading">#</a></h3><p>After advertising to the validators that a feature proposal is pending their
acceptance, the votes are tallied by running:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ spl-feature-proposal tally 8CyUVvio2oYAP28ZkMBPHq88ikhRgWet6i4NYsCW5Cxa</span></div></div></div></div></div><p>Anybody may tally the vote.  Once the required number of votes are tallied, the
feature will be automatically activated at the start of the next epoch.</p><p>Upon a successful activation the feature will now show as activated by
<code>solana feature status</code> as well.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/solana-program-library/spl/stake-pool"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Stake Pool Program</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link">Background</a></li><li><a href="#source" class="table-of-contents__link">Source</a></li><li><a href="#interface" class="table-of-contents__link">Interface</a></li><li><a href="#command-line-utility" class="table-of-contents__link">Command-line Utility</a><ul><li><a href="#configuration" class="table-of-contents__link">Configuration</a></li></ul></li><li><a href="#feature-proposal-life-cycle" class="table-of-contents__link">Feature Proposal Life Cycle</a><ul><li><a href="#implement-the-feature" class="table-of-contents__link">Implement the Feature</a></li><li><a href="#initiate-the-feature-proposal" class="table-of-contents__link">Initiate the Feature Proposal</a></li><li><a href="#tally-the-votes" class="table-of-contents__link">Tally the Votes</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discordapp.com/invite/pquxPsq" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/solana" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://forums.solana.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forums</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/solana-labs/solana-program-library" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 Solana Foundation</div></div></div></footer></div>
<script src="/solana-program-library/spl/styles.08b0f695.js"></script>
<script src="/solana-program-library/spl/runtime~main.b775e681.js"></script>
<script src="/solana-program-library/spl/main.4fc48ab9.js"></script>
<script src="/solana-program-library/spl/1.1e40216e.js"></script>
<script src="/solana-program-library/spl/2.c09dfc1d.js"></script>
<script src="/solana-program-library/spl/22.4d569a61.js"></script>
<script src="/solana-program-library/spl/20.d408417c.js"></script>
<script src="/solana-program-library/spl/720ffad6.9c0d7f9c.js"></script>
<script src="/solana-program-library/spl/17896441.fdadb27c.js"></script>
<script src="/solana-program-library/spl/417fca3a.11e73e1a.js"></script>
</body>
</html>