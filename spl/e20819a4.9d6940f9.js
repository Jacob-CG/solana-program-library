(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{151:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return d}));var a=n(2),o=n(9),r=(n(0),n(155)),c={title:"Associated Token Account Program"},s={id:"associated-token-account",isDocsHomePage:!1,title:"Associated Token Account Program",description:"This program defines the convention and provides the mechanism for mapping",source:"@site/src/associated-token-account.md",permalink:"/solana-program-library/spl/associated-token-account",sidebar:"docs",previous:{title:"Token-Lending Program",permalink:"/solana-program-library/spl/token-lending"},next:{title:"Memo Program",permalink:"/solana-program-library/spl/memo"}},i=[{value:"Motivation",id:"motivation",children:[]},{value:"Background",id:"background",children:[]},{value:"Source",id:"source",children:[]},{value:"Interface",id:"interface",children:[{value:"Finding the Associated Token Account address",id:"finding-the-associated-token-account-address",children:[]},{value:"Creating an Associated Token Account",id:"creating-an-associated-token-account",children:[]}]}],l={rightToc:i};function d(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},l,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"This program defines the convention and provides the mechanism for mapping\nthe user's wallet address to the associated token accounts they hold."),Object(r.b)("h2",{id:"motivation"},"Motivation"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"A user may own arbitrarily many token accounts belonging to the same mint\nwhich makes it difficult for other users to know which account they should send\ntokens to and introduces friction into many other aspects of token management.\nThis program introduces a way to ",Object(r.b)("em",{parentName:"p"},"deterministically")," derive a token account key\nfrom a user's main System account address and a token mint address, allowing the\nuser to create a main token account for each token he owns. We call these\naccounts ",Object(r.b)("em",{parentName:"p"},"Associated Token Accounts"),".")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},"In addition, it allows a user to send tokens to another user even if the\nbeneficiary does not yet have a token account for that mint. Unlike a system\ntransfer, for a token transfer to succeed the recipient must have a token\naccount with the compatible mint already, and somebody needs to fund that token\naccount. If the recipient must fund it first, it makes things like airdrop\ncampaigns difficult and just generally increases the friction of token\ntransfers. AToken allows the sender to create the associated token account for\nthe receiver, so the token transfer just works."))),Object(r.b)("p",null,"See the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/solana-program-library/spl/token"}),"SPL Token")," program for more information about tokens in\ngeneral."),Object(r.b)("h2",{id:"background"},"Background"),Object(r.b)("p",null,"Solana's programming model and the definitions of the Solana terms used in this\ndocument are available at:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.solana.com/apps"}),"https://docs.solana.com/apps")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"https://docs.solana.com/terminology"}),"https://docs.solana.com/terminology"))),Object(r.b)("h2",{id:"source"},"Source"),Object(r.b)("p",null,"The Associated Token Account Program's source is available on\n",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/solana-labs/solana-program-library"}),"github"),"."),Object(r.b)("h2",{id:"interface"},"Interface"),Object(r.b)("p",null,"The Associated Token Account Program is written in Rust and available on\n",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://crates.io/crates/spl-associated-token-account"}),"crates.io")," and\n",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/spl-associated-token-account"}),"docs.rs"),"."),Object(r.b)("h3",{id:"finding-the-associated-token-account-address"},"Finding the Associated Token Account address"),Object(r.b)("p",null,"The associated token account for a given wallet address is simply a\nprogram-derived account consisting of the wallet address itself and the token mint."),Object(r.b)("p",null,"The ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/spl-associated-token-account/latest/spl_associated_token_account/fn.get_associated_token_address.html"}),"get_associated_token_address"),"\nRust function may be used by clients to derive the wallet's associated token address."),Object(r.b)("p",null,"The associated account address can be derived in TypeScript with:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-ts"}),"import { PublicKey } from '@solana/web3.js';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\n\nconst SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID: PublicKey = new PublicKey(\n  'ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL',\n);\n\nasync function findAssociatedTokenAddress(\n    walletAddress: PublicKey,\n    tokenMintAddress: PublicKey\n): Promise<PublicKey> {\n    return (await PublicKey.findProgramAddress(\n        [\n            walletAddress.toBuffer(),\n            TOKEN_PROGRAM_ID.toBuffer(),\n            tokenMintAddress.toBuffer(),\n        ],\n        SPL_ASSOCIATED_TOKEN_ACCOUNT_PROGRAM_ID\n    ))[0];\n}\n")),Object(r.b)("h3",{id:"creating-an-associated-token-account"},"Creating an Associated Token Account"),Object(r.b)("p",null,"If the associated token account for a given wallet address does not yet exist,\nit may be created by ",Object(r.b)("em",{parentName:"p"},"anybody")," by issuing a transaction containing the\ninstruction returned by ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.rs/spl-associated-token-account/latest/spl_associated_token_account/fn.create_associated_token_account.html"}),"create_associated_token_account"),"."),Object(r.b)("p",null,"Regardless of creator the new associated token account will be fully owned by\nthe wallet, as if the wallet itself had created it."))}d.isMDXComponent=!0},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=o.a.createContext({}),d=function(e){var t=o.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=d(e.components);return o.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},p=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),u=d(n),p=a,m=u["".concat(c,".").concat(p)]||u[p]||b[p]||r;return n?o.a.createElement(m,s(s({ref:t},l),{},{components:n})):o.a.createElement(m,s({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,c=new Array(r);c[0]=p;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:a,c[1]=s;for(var l=2;l<r;l++)c[l]=n[l];return o.a.createElement.apply(null,c)}return o.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);